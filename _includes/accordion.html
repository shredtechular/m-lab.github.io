{% comment %} 
<!--
  Accordion Feature

  This partial can be included in any markdown file that needs accordion behavior.
  In the markdown file that includes this partial, there needs to be an array of the 
  different accordion entries per accordion needed.  Then within the markdown, each
  entry can be captured using the liquid " capture accordion_entry_XX " where "XX"
  is the number cooresponding to the accordion entry begining with 1.  This information 
  is what this partial keys on and loops through to build the accordion.

	If including multiple accordions in the markdown, the "accordion_entry_XX" XX numbering
	system should restart at 1.

  Parameters:
    acc_section (string, optional):
      ID signifying specific accordion to build.  Defaults to generic "accordion" name 
      if not specified.

--> 
{% endcomment %}


{% comment %} <!-- Check to see if there is a specifc accordion name being passed in. --> {% endcomment %}
{% if include.acc_section %}
	{% capture acc_name %}{{ include.acc_section }}-accordion{% endcapture %}
{% else %}
  {% assign acc_name = "accordion" %}
{% endif %}


<div class="info-section accordion-section">
  <ul class="accordion is-collapsed">

    {% comment %} <!-- Get number of accordion items set in page frontmatter --> {% endcomment %}
    {% assign acc_index = page.[acc_name].num-of-headings %}

    {% for i in (1..acc_index) %}
      {% capture accordion_section %}accordion_entry_{{ forloop.index }}{% endcapture %}
      {% assign accordionArray = [accordion_section] | markdownify | split: '<!--accordion-header-content-separator-->' %}
    
    <li class="accordion-entry">
      {% if page.header-ids %}
        <h2 class="tabbed-heading">{{ accordionArray.first | strip_html }}</h2>
      {% else %}
        {{ accordionArray.first }}
      {% endif %}
      <div class="accordion-content">{{ accordionArray.last }}</div>
    </li>
    
    {% endfor %}

  </ul>
</div>